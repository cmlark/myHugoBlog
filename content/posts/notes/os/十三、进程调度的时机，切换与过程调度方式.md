---
title: 十三、进程调度的时机，切换与过程调度方式
tags: ["操作系统"]
categories: OS学习笔记
draft: false
date: 2022-04-20T11:29:52+08:00
---

#### 1.进程调度的时机

**进程调度**（低级调度），就是按照某种算法从就绪队列中选择一个进程为其分配处理机。

> **需要进行**进程调度与切换的情况：
>
> - 当前运行的进程**主动放弃**处理机（有的系统中只允许进程主动放弃处理机）
>   - 进程正常终止
>   - 运行过程中发生异常而终止
>   - 进程主动请求阻塞（如等待I/O）
> - 当前运行的进程**被动放弃**处理机（有的系统中，进程可以主动放弃处理机，当又更紧急的任务需要处理时，也会强行剥夺处理机（被动放弃））
>   - 分给进程的时间片用完
>   - 有更紧急的事情需要处理（如I/O中断）
>   - 有更高优先级的进程进入就绪队列

<!--more-->

> **不能进行**进程调度与切换的情况：
>
> - 在**处理中断的过程中**，中断处理过程复杂，与硬件密切相关，很难做到在中断处理的过程中进行进程切换。
> - 进程在**操作系统内核程序临界区**中（但是进程在普通临界区中是可以进行调度、切换的）。
> - 在**原子操作过程中（原语）**。原子操作不可中断，要一气呵成。

**进程在操作系统内核程序临界区中不能进行调度与切换**。

> 临界资源：一个时间段内只允许一个进程使用的资源。个进程需要**互斥**地访问临界资源。
>
> 临界区：访问临界资源的那段代码。
>
> **内核程序临界区**一般是用来访问**某种内核数据结构的**，比如就绪队列（由各就绪进程的PCB组成）



#### 2.进程调度方式

- **非剥夺调度方式**，又称**非抢占方式**。即，只允许进程主动放弃处理机。在运行的过程中即便有更紧迫的任务到达，当前进程依然会继续使用处理机，直到进程终止或主动要求进入阻塞。

  > 实现简单，系统开销小但是无法及时处理紧急任务，更适合于早期的批处理系统。

- **剥夺调度方式**，又称抢占方式。当一个进程正在处理机上执行时，如果有一个更重要或紧迫的进程需要使用处理机，则立即暂停正在执行的进程，将处理机分配给更重要紧迫的那个进程。

  可以优先处理更紧急的进程，也可以实现让各进程按时间片轮流执行的功能（通过时钟中断）。更适合于实时操作系统、分时操作系统。

#### 3.进程的切换与过程

“狭义的进程调度”与“进程切换”的区别：

**狭义的进程调度**指的是从就绪队列中**选中一个要运行的进程**（这个进程可以使刚刚被暂停执行的进程，也可以是**另一个进程**，后一种情况就需要**进程切换**）

**进程切换**是指一个进程让出处理机，由另一个进程占用处理机的过程。

**广义的进程调度**包含了选择一个进程和进程切换两个步骤。

进程切换的过程主要完成了：

- 对原来运行进程各数据的保存
- 对新进程各种数据的恢复

（如：程序计数器，程序状态字，各种数据寄存器等处理机现场信息，这些信息一般是保存在PCB中）

> 注意：**进程切换是有代价的**，因此如果**过于频繁地进行进程调度、切换，**必然会使**整个系统的效率降低**，使系统能大部分时间都花在了进程切换上，而真正用于执行进程的时间减少。

#### 4.知识回顾

![Lsg9it.png](https://s1.ax1x.com/2022/04/20/Lsg9it.png)

#### 5.巴拉巴拉

关于“抢占式调度”和“非抢占式翘度”老师的课程说了后面会讲，这块我听的也是蒙蒙叨叨的，他说了这块不重要，理解即可。

